@page "/pumpcontrol"
@inject IPumpControlService PumpControlProxy

@if (Watertank != null)
{
    <TankImage FilledPercentage="@((int) (100 / Watertank.VolumeTotal * Watertank.VolumeFilled))"/>
}

@code {


    private WatertankStatus Watertank;
    private PumpStatus Pump;

    /// <inheritdoc />
    protected override async Task OnInitializedAsync()
    {
        PumpControlProxy.WatertankUpdated += (_, args) =>
        {
            Watertank = args.Status;
            StateHasChanged();
        };
        PumpControlProxy.PumpUpdated += (_, args) => Pump = args.Status;

        Watertank = await PumpControlProxy.WatertankStatus();
        Pump = await PumpControlProxy.PumpStatus();
    }



}